/* ===================================================== */
/* == iOS-like Apple Theme (inspired by iOS design language) ==
   Scoped to .settings-page
   - Rounded pill controls
   - Subtle translucency / backdrop blur
   - Apple's system font stack & spacing
   - Light + Dark mode variables tuned for iOS
*/
/* ===================================================== */

/* Global theme variables (Apple-inspired) */
:root{
  --font-size-base: 17px;
  --system-font: -apple-system, "SF Pro Text", "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --line-height: 1.47059;

  /* Light mode colors (iOS-like) */
  --apple-light-bg: #f5f5f7;           /* window background */
  --apple-light-surface: #ffffff;      /* cards, sheets */
  --apple-light-text: #1d1d1f;         /* primary text */
  --apple-light-secondary: #6e6e73;    /* secondary text */
  --apple-light-border: #d2d2d7;       /* separators */
  --apple-accent: #007aff;             /* iOS blue */
  --apple-accent-hover: #005ecf;
  --apple-success: #34c759;
  --apple-danger: #ff3b30;
  --apple-shadow: rgba(0,0,0,0.08);
  --glass-blur: 18px;

  /* Dark mode colors (iOS-like) */
  --apple-dark-bg: #0b0b0c;
  --apple-dark-surface: #1c1c1e;
  --apple-dark-text: #f2f2f3;
  --apple-dark-secondary: #929297;
  --apple-dark-border: #2c2c2e;
  --apple-dark-shadow: rgba(0,0,0,0.6);
}

/* Mode classes - apply body.light-mode or body.dark-mode for explicit mode */
body.light-mode {
  --bg-color: var(--apple-light-bg);
  --content-bg: var(--apple-light-surface);
  --text-color: var(--apple-light-text);
  --secondary-text: var(--apple-light-secondary);
  --border-color: var(--apple-light-border);
  --accent-color: var(--apple-accent);
  --hover-color: var(--apple-accent-hover);
  --shadow-color: var(--apple-shadow);
  --glass-bg: rgba(255,255,255,0.6);
  --glass-border: rgba(0,0,0,0.04);
}

body.dark-mode {
  --bg-color: var(--apple-dark-bg);
  --content-bg: var(--apple-dark-surface);
  --text-color: var(--apple-dark-text);
  --secondary-text: var(--apple-dark-secondary);
  --border-color: var(--apple-dark-border);
  --accent-color: var(--apple-accent);
  --hover-color: var(--apple-accent-hover);
  --shadow-color: var(--apple-dark-shadow);
  --glass-bg: rgba(28,28,30,0.5);
  --glass-border: rgba(255,255,255,0.04);
}

/* ========== Page base (scoped) ========== */
body.settings-page{
  font-family: var(--system-font);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: var(--bg-color);
  color: var(--text-color);
  font-size: var(--font-size-base);
  line-height: var(--line-height);
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
}

/* Container */
body.settings-page .container{
  max-width: 820px;
  margin: 0 auto;
  padding: 34px 20px;
}

/* Header */
body.settings-page .settings-header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 12px;
  padding-bottom: 12px;
  margin-bottom: 26px;
  border-bottom: 1px solid var(--border-color);
}
body.settings-page .settings-header h1{
  font-size: 28px;
  font-weight: 600;
  margin:0;
  color: var(--text-color);
  letter-spacing: -0.01em;
}
body.settings-page .version{
  color: var(--secondary-text);
  font-size: 14px;
}

/* Subsections: use grouped iOS-style cards */
body.settings-page .settings-subsection{
  background: linear-gradient(180deg, color-mix(in srgb, var(--content-bg) 88%, transparent), var(--content-bg));
  border-radius: 14px;
  overflow: hidden;
  margin-bottom: 20px;
  box-shadow: 0 6px 18px var(--shadow-color);
  border: 1px solid var(--glass-border, rgba(0,0,0,0.04));
}

/* Section title */
body.settings-page .subsection-title{
  padding: 14px 18px;
  margin:0;
  font-size: 17px;
  font-weight: 600;
  color: var(--text-color);
  border-bottom: 1px solid var(--border-color);
  background: transparent;
}

/* Setting rows - mimic grouped UITableView */
body.settings-page .setting-card{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 12px 18px;
  border-bottom: 1px solid var(--border-color);
  background: transparent;
  transition: background-color 160ms ease;
}
body.settings-page .setting-card:last-child{
  border-bottom: 0;
}
body.settings-page .setting-card:hover{
  background: color-mix(in srgb, var(--content-bg) 92%, var(--accent-color) 1%);
}

/* Labels & description */
body.settings-page .setting-label{ flex: 1; padding-right: 16px; min-width: 0;}
body.settings-page .setting-title{
  margin: 0 0 4px 0;
  font-size: 16px;
  font-weight: 500;
  color: var(--text-color);
}
body.settings-page .setting-description{
  margin: 0;
  font-size: 13px;
  color: var(--secondary-text);
  line-height: 1.35;
}

/* Toggle - Apple style */
body.settings-page .toggle-switch{
  width: 52px;
  height: 32px;
  position: relative;
  flex-shrink:0;
}
body.settings-page .toggle-switch input{ opacity:0; width:0; height:0; position:absolute; }
body.settings-page .toggle-slider{
  position: absolute;
  inset:0;
  border-radius: 999px;
  background: var(--toggle-off, rgba(0,0,0,0.08));
  transition: background 160ms ease, box-shadow 160ms ease;
  box-shadow: inset 0 -1px 0 rgba(0,0,0,0.03);
}
body.settings-page .toggle-slider::before{
  content: "";
  position: absolute;
  left: 4px;
  top: 4px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--content-bg);
  box-shadow: 0 1px 2px rgba(0,0,0,0.12);
  transition: transform 160ms cubic-bezier(.2,.9,.3,1);
}
body.settings-page input:checked + .toggle-slider{
  background: linear-gradient(180deg, color-mix(in srgb, var(--accent-color) 85%, #fff), var(--accent-color));
  box-shadow: 0 6px 18px color-mix(in srgb, var(--accent-color) 30%, transparent);
}
body.settings-page input:checked + .toggle-slider::before{
  transform: translateX(20px);
}

/* Segmented control (iOS style) */
body.settings-page .segmented-control{
  display:inline-flex;
  background: linear-gradient(180deg, color-mix(in srgb, var(--content-bg) 88%, transparent), var(--content-bg));
  border-radius: 12px;
  padding: 4px;
  gap:4px;
  border:1px solid var(--border-color);
  box-shadow: 0 4px 12px var(--shadow-color);
}
body.settings-page .segmented-control button{
  background: transparent;
  border:0;
  padding: 8px 12px;
  border-radius: 8px;
  color: var(--text-color);
  font-weight: 600;
  cursor:pointer;
}
body.settings-page .segmented-control button.active{
  background: linear-gradient(180deg, color-mix(in srgb, var(--accent-color) 92%, #fff), var(--accent-color));
  color: white;
  box-shadow: 0 4px 10px color-mix(in srgb, var(--accent-color) 30%, transparent);
}

/* Range slider (thumb + track) */
body.settings-page #text-size-slider{
  -webkit-appearance:none;
  appearance:none;
  width: 100%;
  height: 6px;
  background: linear-gradient(90deg, var(--slider-track-filled-color, var(--accent-color)) var(--slider-percent, 40%), var(--slider-track-color, rgba(0,0,0,0.08)) 0);
  border-radius: 999px;
  outline:none;
}
body.settings-page #text-size-slider::-webkit-slider-thumb{
  -webkit-appearance:none;
  width: 20px;
  height: 20px;
  background: var(--content-bg);
  border-radius: 50%;
  border: 1px solid var(--border-color);
  box-shadow: 0 2px 6px rgba(0,0,0,0.12);
}

/* Buttons (pill primary) */
body.settings-page .reset-button,
body.settings-page #cookie-consent-banner button{
  padding: 10px 16px;
  border-radius: 14px;
  border: none;
  font-weight: 600;
  font-size: 15px;
  color: #fff;
  cursor: pointer;
  background: linear-gradient(180deg, color-mix(in srgb, var(--accent-color) 92%, #fff), var(--accent-color));
  box-shadow: 0 8px 20px color-mix(in srgb, var(--accent-color) 28%, transparent);
  transition: transform 120ms ease, box-shadow 160ms ease;
}
body.settings-page .reset-button:active,
body.settings-page #cookie-consent-banner button:active{
  transform: translateY(1px) scale(0.995);
}

/* Back link */
body.settings-page .back-link{
  display:inline-flex;
  align-items:center;
  gap:8px;
  color: var(--accent-color);
  text-decoration:none;
}

/* Cookie consent banner (floating sheet style) */
body.settings-page #cookie-consent-banner{
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: min(920px, 94%);
  background: linear-gradient(180deg, color-mix(in srgb, var(--glass-bg) 85%, transparent), var(--content-bg));
  border-radius: 14px;
  border: 1px solid var(--glass-border);
  padding: 16px 18px;
  display:flex;
  gap:12px;
  align-items:center;
  justify-content:space-between;
  box-shadow: 0 10px 30px var(--shadow-color);
  z-index: 1100;
}

/* Footer */
body.settings-page footer{
  padding: 18px;
  text-align:center;
  color: var(--secondary-text);
  border-top: 1px solid var(--border-color);
  margin-top: 28px;
}

/* Focus-visible (desktop) */
body.settings-page :focus-visible{
  outline: none;
  box-shadow: 0 0 0 4px color-mix(in srgb, var(--accent-color) 18%, transparent);
  border-radius: 8px;
}

/* Responsive tweaks */
@media (max-width:768px){
  body.settings-page .container{ padding: 22px 14px; }
  body.settings-page .settings-header h1{ font-size: 22px; }
  body.settings-page .setting-card{ padding: 12px 14px; flex-direction: column; align-items:flex-start; gap:8px; }
  body.settings-page .text-size-control{ width:100%; }
  body.settings-page #cookie-consent-banner{ width: 92%; bottom: 12px; padding: 12px; }
}
@media (max-width:480px){
  body.settings-page .container{ padding: 16px; }
  body.settings-page .settings-header h1{ font-size: 20px; }
  body.settings-page .subsection-title{ font-size: 15px; padding: 12px 14px; }
  body.settings-page #cookie-consent-banner{ left: 50%; transform: translateX(-50%); width: calc(100% - 20px); bottom: 10px; border-radius: 12px; }
}

/* Utility: grouped list (iOS table look) */
.body.settings-page .grouped-list{ list-style:none; margin:0; padding:0; }
body.settings-page .grouped-list .group{
  margin: 12px 14px;
  border-radius: 12px;
  overflow:hidden;
  background: var(--content-bg);
  border: 1px solid var(--border-color);
  box-shadow: 0 6px 18px var(--shadow-color);
}
